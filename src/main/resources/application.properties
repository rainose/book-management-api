# =====================================
# Database Configuration
# =====================================
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:bookmanageapp}
spring.datasource.username=${DB_USER:bookmanage_dev}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# =====================================
# jOOQ Configuration
# =====================================
spring.jooq.sql-dialect=POSTGRES

# =====================================
# Flyway Configuration
# =====================================
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true

# =====================================
# Connection Pool Settings (HikariCP)
# =====================================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# =====================================
# Application Configuration
# =====================================
spring.application.name=book-manage-api
server.port=8080

# =====================================
# Jackson Configuration
# =====================================
spring.jackson.default-property-inclusion=non_null
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC

# =====================================
# Validation Configuration
# =====================================
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false

# =====================================
# Logging Configuration
# =====================================
logging.level.org.jooq=INFO
logging.level.org.springframework.jdbc=DEBUG
logging.level.org.flywaydb=INFO
logging.level.com.bookmanageapp=DEBUG

# =====================================
# Output Configuration
# =====================================
spring.output.ansi.enabled=always